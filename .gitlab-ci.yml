stages:
  - build
  - test
  - deploy

# Build stage: 使用 Docker 镜像构建项目
build_job:
  stage: build
  image: python:3.8-slim  # 使用 Python 3.8 镜像
  script:
    - echo "Building the project"
    - docker build -t myimage .  # 构建 Docker 镜像

# Test stage: 使用 Docker 镜像运行测试
test_job:
  stage: test
  image: python:3.8-slim  # 使用相同的 Python 镜像
  script:
    - echo "Running tests"
    - docker run myimage pytest  # 在 Docker 容器内运行测试

# Deploy stage: 使用 Docker 镜像部署项目
deploy_job:
  stage: deploy
  image: python:3.8-slim  # 使用相同的 Python 镜像
  script:
    - echo "Deploying project"
    - docker run myimage deploy  # 在 Docker 容器内执行部署操作

